<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>objvl</title><meta name="description" content="Documentation forobjvl v0.1.0"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><link id="highlightTheme" rel="stylesheet" crossorigin="anonymous"><link rel="icon" type="image/x-icon" href="/assets/media/favicon.ico"><link href="../../assets/css/index.css" type="text/css" rel="stylesheet"><script src="../../assets/js/index.js"></script><script>window.depth="../../";window.ab=false;</script></head><body><nav class="container-fluid navi"><div class="row"><div class="col-4"><input class="form-control search" id="search" type="search" placeholder="Search..." aria-label="Search"></div><div class="col-8"><div class="row float-end row-cols-auto" style="margin-top:5px"><div class="col clickable-icon" id="theme-icon"></div><a href="../../changelog.html" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-newspaper" viewbox="0 0 16 16"><path d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"></path><path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"></path></svg></a><div class="col"><a href="https://github.com/GoogleFeud/objvl/tree/HEAD" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github" viewbox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div><div class="col"><span style="font-size: 1.2em">v0.1.0</span></div></div></div></div></nav><div class="container-fluid"><div class="row"><div class="col-lg-auto sidebar" id="sidebar"><h1 class="lib-name text-center"><a href="../../index.html">objvl</a></h1><p class="current-thing text-center"></p><div class="sidebar-members"><div class="sidebar-member"><div class="collapsible-trigger"><span class="collapsible-arrow open"></span><span class="sidebar-category"><a id="#custom-validators">Custom validators</a></span></div><div class="collapsible-body open"><span class="sidebar-category-member"><a href="#validator-property" class="sidebar-category-member"><code>validator</code> property</a></span><span class="sidebar-category-member"><a href="#custom-arguments" class="sidebar-category-member">Custom arguments</a></span></div></div><div class="sidebar-member"><div class="collapsible-trigger"><span class="collapsible-arrow open"></span><span class="sidebar-category">Guides</span></div><div class="collapsible-body open"><span class="sidebar-category-member"><a href="../Guides/Getting started.html">Getting started</a></span><span class="sidebar-category-member"><a href="../Guides/Custom validators.html">Custom validators</a></span><span class="sidebar-category-member"><a href="../Guides/Reusing types.html">Reusing types</a></span><span class="sidebar-category-member"><a href="../Guides/Security and quirks.html">Security and quirks</a></span></div></div></div></div><div id="content" class="col content"><div class="d-none" id="search-menu"><h1>Search results</h1><div class="row" style="margin-top: 20px;margin-bottom: 20px"><div class="col-md-4"><p class="mini-header">Types</p><div><input type="checkbox" class="c-checkbox" id="search-option-classes" checked><span>Classes</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-interfaces" checked><span>Interfaces</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-enums" checked><span>Enums</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-functions" checked><span>Functions</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-types" checked><span>Type aliases</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-constants"><span>Constants</span></div></div><div class="col-md-4"><p class="mini-header">Members</p><div><div><input type="checkbox" class="c-checkbox" id="search-option-properties" checked><span>Properties</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-methods" checked><span>Methods</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-getters" checked><span>Getters</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-setters" checked><span>Setters</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-enum-members"><span>Enum members</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-privates"><span>Show privates</span></div></div></div><div class="col-md-4"><p class="mini-header">Other</p><div><div><input type="checkbox" class="c-checkbox" id="search-option-this-module-only"><span>In this module only</span></div></div></div></div><div id="search-result-list"></div></div><div id="content-main" class="d-none"><div class="path"><span><a href="../../index.html" class="path-member">index</a> / <span class="path-member">Guides</span> / <a href="" class="path-member">Custom validators</a></span></div><h1 id="custom-validators" class="section-header">Custom validators</h1><h2 id="validator-property" class="section-header"><code>validator</code> property</h2><p>You can create completely custom validators using the <code>validator</code> property. If the provided function returns a falsey value, like <code>false</code>, <code>null</code>, <code>undefined</code>, <code>&quot;&quot;</code> or <code>0</code>, then that means that the validator <strong>pased</strong>, and an error won&#39;t be returned. If it returns any other value, then it means there&#39;s an error, and the <code>validator</code> error function will be executed. The first parameter of the error function will always be the value that got received, the second will be the value returned by the validator, and the third one is the path to the property.</p>
<div class="tab-code"><span class="tab-code-tab hljs">Builders</span><span class="tab-code-tab hljs">Objects</span><div class="tab-code-code" style="display: none"><pre><code class="hljs"><span class="hljs-keyword">const</span> validator = Builder.<span class="hljs-title function_">schema</span>({
    <span class="hljs-attr">name</span>: Builder.<span class="hljs-title function_">string</span>()
        .<span class="hljs-title function_">validator</span>(<span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;--&quot;</span>))
        .<span class="hljs-title function_">err</span>(<span class="hljs-string">&quot;validator&quot;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;The string cannot start with &#x27;--&#x27;&quot;</span>)
});</code></pre></div><div class="tab-code-code" style="display: none"><pre><code class="hljs"><span class="hljs-keyword">const</span> validator = {
    <span class="hljs-attr">properties</span>: {
        <span class="hljs-attr">name</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,
            <span class="hljs-attr">validator</span>: <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;--&quot;</span>),
            <span class="hljs-attr">errors</span>: {
                <span class="hljs-attr">validator</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;The string cannot start with &#x27;--&#x27;&quot;</span>
            }
        }
    }
}</code></pre></div></div><h2 id="custom-arguments" class="section-header">Custom arguments</h2><p>Since objvl compiles the schema into a function, you cannot use any variables inside the <code>validator</code> and <code>error</code> functions. To fix this, you can pass <strong>custom argument names</strong> in the <code>compile</code> function.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> validator = <span class="hljs-title function_">compile</span>({...}, <span class="hljs-string">&quot;arg1&quot;</span>, <span class="hljs-string">&quot;arg2&quot;</span>);</code></pre><p>And then call the validator like this:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> valueOutsideValidator = <span class="hljs-number">42</span>;
<span class="hljs-title function_">validator</span>({...}, <span class="hljs-string">&quot;Hello World&quot;</span>, valueOutsideValidator);</code></pre><p>Now the functions inside the validator can use the arguments <code>arg1</code> and the <code>valueOutsideValidator</code> variable! This creates another problem, though: If you&#39;re using an IDE, then it&#39;s going to complain that <code>arg1</code> and <code>arg2</code> are not defined. The only way to fix this is to pass the function as a string:</p>
<div class="tab-code"><span class="tab-code-tab hljs">Builders</span><span class="tab-code-tab hljs">Objects</span><div class="tab-code-code" style="display: none"><pre><code class="hljs"><span class="hljs-keyword">const</span> validator = Builder.<span class="hljs-title function_">schema</span>({
    <span class="hljs-attr">name</span>: Builder.<span class="hljs-title function_">string</span>()
        .<span class="hljs-title function_">validator</span>(<span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;--&quot;</span>))
        .<span class="hljs-title function_">err</span>(<span class="hljs-string">&quot;validator&quot;</span>, <span class="hljs-string">&quot;() =&gt; ({ code: errors.VALIDATOR })&quot;</span>)
}, <span class="hljs-string">&quot;errors&quot;</span>);

<span class="hljs-keyword">const</span> errors = { <span class="hljs-attr">VALIDATOR</span>: <span class="hljs-number">1001</span> };
<span class="hljs-title function_">validator</span>({...}, errors);</code></pre></div><div class="tab-code-code" style="display: none"><pre><code class="hljs"><span class="hljs-keyword">const</span> validator = {
    <span class="hljs-attr">properties</span>: {
        <span class="hljs-attr">name</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;string&quot;</span>,
            <span class="hljs-attr">validator</span>: <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;--&quot;</span>),
            <span class="hljs-attr">errors</span>: {
                <span class="hljs-attr">validator</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;() =&gt; ({ code: errors.VALIDATOR })&quot;</span>
            }
        }
    }
}

<span class="hljs-keyword">const</span> errors = { <span class="hljs-attr">VALIDATOR</span>: <span class="hljs-number">1001</span> };
<span class="hljs-title function_">validator</span>({...}, errors);</code></pre></div></div></div></div></div></div><div id="to-top" class="btn-to-top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-up" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"></path></svg></div><div id="sidebar-arrow" class="sidebar-arrow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-right" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"></path></svg></div></body></html>